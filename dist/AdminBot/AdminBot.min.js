class cBot{#_job={};#_tt=0;#_start_with=null;#_enabledGlobal=!1;constructor(e=null,t=10){this.#_tt=t,this.#_start_with=e}#getProperties(){var e=document.querySelector("div.n5hs2j7m.oq31bsqd.gx1rr48f.qh5tioqs"),t=e.childNodes.length;return[e,t,e.childNodes[t-1].innerText]}async sendScript(e,t=!0){var s=e.split("\r\n").map(e=>e.trim()).filter(e=>e);let r=document.querySelector("#main");var i=r.querySelector('div[contenteditable="true"]');if(!i)throw new Error("You don't have any window opened!");for(const o of s)console.log(o),i.focus(),document.execCommand("insertText",!1,o),i.dispatchEvent(new Event("change",{bubbles:!0})),t&&setTimeout(()=>{(r.querySelector('[data-testid="send"]')||r.querySelector('[data-icon="send"]')).click()},100),s.indexOf(o)!==s.length-1&&await new Promise(e=>setTimeout(e,250));return s.length}execute(e){this.#_start_with&&!e.startsWith(this.#_start_with)||((e=e.slice(this.#_start_with.length).split(" "))[0]in this.#_job?this.#_job[e[0]][0](e,this.sendScript):"error"in this.#_job&&this.#_job.error[0](e,this.sendScript))}run(){let s,r,i;[s,r,i]=this.#getProperties(),setInterval(()=>{var e,t;[s,r,e]=this.#getProperties(),i!=e&&(s.childNodes[r-1].querySelector(".message-out")||this.#_enabledGlobal)&&(t=s.childNodes[r-1].querySelector("._11JPr.selectable-text.copyable-text").innerText??e.split("\n").slice(-3)[0],this.execute(t),i=e)},this.#_tt)}help(){var e,t;let s=`\`\`\`Command${" ".repeat(14)}Usage
-------${"-".repeat(14)}-----
`;for([e,t]of Object.entries(this.#_job))s+=""+e+" ".repeat(21-e.length)+t[1]+`
 - 
`;s+="```",this.sendScript(s)}addTask(e,t,s){e in this.#_job?console.error(`Task ${e} already exist in jobs`):this.#_job[e]=[t,s??e]}removeTask(e){e in this.#_job?delete this.#_job[e]:console.error(`Task ${e} not exist in jobs`)}enableGlobal(){this.#_enabledGlobal=!0}disableGlobal(){this.#_enabledGlobal=!1}}