class cBot{#_job={};#_tt=0;#_start_with=null;constructor(t=null,e=10){this.#_tt=e,this.#_start_with=t}#getProperties(){var t=document.querySelector("div.n5hs2j7m.oq31bsqd.gx1rr48f.qh5tioqs"),e=t.childNodes.length;return[t,e,t.childNodes[e-1].innerText]}async sendScript(t){var e=t.split("\r\n").map(t=>t.trim()).filter(t=>t);let r=document.querySelector("#main");var s=r.querySelector('div[contenteditable="true"]');if(!s)throw new Error("You don't have any window opened!");for(const i of e)console.log(i),s.focus(),document.execCommand("insertText",!1,i),s.dispatchEvent(new Event("change",{bubbles:!0})),setTimeout(()=>{(r.querySelector('[data-testid="send"]')||r.querySelector('[data-icon="send"]')).click()},100),e.indexOf(i)!==e.length-1&&await new Promise(t=>setTimeout(t,250));return e.length}run(){let r,s,i;[r,s,i]=this.#getProperties(),setInterval(()=>{var e;if([r,s,e]=this.#getProperties(),i!=e&&r.childNodes[s-1].querySelector(".message-out")){let t=r.childNodes[s-1].querySelector("._11JPr.selectable-text.copyable-text").innerText??e.split("\n").slice(-3)[0];this.#_start_with&&!t.startsWith(this.#_start_with)||((t=t.slice(this.#_start_with.length).split(" "))[0]in this.#_job?this.#_job[t[0]](t,this.sendScript):"error"in this.#_job&&this.#_job.error(t,this.sendScript),i=e)}},this.#_tt)}addTask(t,e){t in this.#_job?console.error(`Task ${t} already exist in jobs`):this.#_job[t]=e}}