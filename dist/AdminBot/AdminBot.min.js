class cBot{#_job={};#_tt=0;#_start_with=null;#_enabledGlobal=!1;constructor(e=null,t=10){this.#_tt=t,this.#_start_with=e}#getProperties(){var e=document.querySelector("div.n5hs2j7m.oq31bsqd.gx1rr48f.qh5tioqs"),t=e.childNodes.length;return[e,t,e.childNodes[t-1].innerText]}async sendScript(e){var t=e.split("\r\n").map(e=>e.trim()).filter(e=>e);let s=document.querySelector("#main");var i=s.querySelector('div[contenteditable="true"]');if(!i)throw new Error("You don't have any window opened!");for(const r of t)console.log(r),i.focus(),document.execCommand("insertText",!1,r),i.dispatchEvent(new Event("change",{bubbles:!0})),setTimeout(()=>{(s.querySelector('[data-testid="send"]')||s.querySelector('[data-icon="send"]')).click()},100),t.indexOf(r)!==t.length-1&&await new Promise(e=>setTimeout(e,250));return t.length}execute(e){this.#_start_with&&!e.startsWith(this.#_start_with)||((e=e.slice(this.#_start_with.length).split(" "))[0]in this.#_job?this.#_job[e[0]](e,this.sendScript):"error"in this.#_job&&this.#_job.error(e,this.sendScript))}run(){let s,i,r;[s,i,r]=this.#getProperties(),setInterval(()=>{var e,t;[s,i,e]=this.#getProperties(),r!=e&&(s.childNodes[i-1].querySelector(".message-out")||this.#_enabledGlobal)&&(t=s.childNodes[i-1].querySelector("._11JPr.selectable-text.copyable-text").innerText??e.split("\n").slice(-3)[0],this.execute(t),r=e)},this.#_tt)}addTask(e,t){e in this.#_job?console.error(`Task ${e} already exist in jobs`):this.#_job[e]=t}removeTask(e){e in this.#_job?delete this.#_job[e]:console.error(`Task ${e} not exist in jobs`)}enableGlobal(){this.#_enabledGlobal=!0}disableGlobal(){this.#_enabledGlobal=!1}}